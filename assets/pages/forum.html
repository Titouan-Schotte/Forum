<!DOCTYPE html>
<html lang="fr">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum</title>
    <link rel="stylesheet" href="/assets/css/forum.css">
</head>
<body class="dark-mode">
<div class="main-container">
    <aside class="sidebar">
        <div class="logo-container">
            <img src="/assets/images/logo.png" alt="Logo" class="logo">
            <h1>Forum</h1>
        </div>
        <nav>
            <ul>
                <li><a href="/"><img src="/assets/images/home.png" alt="Accueil" class="icon"> Accueil</a></li>
                {{if ne .UserLog.Email ""}}
                <li><a href="/settings"><img src="/assets/images/parametre.png" alt="Param√®tres" class="icon"> Param√®tres</a></li>
                <li><a href="/disconnect"><img src="/assets/images/deconnexion.png" alt="D√©connexion" class="icon"> D√©connexion</a></li>
                <li><a href="/profil"><img src="/assets/images/profil.png" alt="Profil" class="icon"> Profil</a></li>
                <li><a href="javascript:void(0);" onclick="openNotifications()"><img src="/assets/images/notification.png" alt="Notifications" class="icon"> Notifications <span id="notification-count" class="badge">3</span></a></li>
                <li><a href="/add-post"><img src="/assets/images/addposte.png" alt="Ajouter un Post" class="icon"> Ajouter un Post</a></li>
                {{ if or (eq .UserLog.IsModo true) (eq .UserLog.IsAdmin true) }}
                <li><a href="/panel"><img src="/assets/images/profil.png" alt="Panel Admin" class="icon"> Panel Admin</a></li>
                {{end}}
                {{else}}
                <li><a href="/login"><img src="/assets/images/deconnexion.png" alt="Se Connecter" class="icon"> Se Connecter</a></li>
                <li><a href="/register"><img src="/assets/images/addposte.png" alt="S'enregistrer" class="icon"> S'enregistrer</a></li>
                {{ end }}
                <li><button id="toggleMode"><img src="/assets/images/sombreclair.png" alt="Mode" class="icon"> Mode Sombre/Clair</button></li>
            </ul>
        </nav>
    </aside>
    <main class="content">
        <div class="search-container">
            <input type="text" id="search-bar" placeholder="Rechercher des posts...">
        </div>
        <div class="categories">
            <div class="category-group">
                <span>Beaut√©:</span>
                <div class="beauty-rating">
                    <span class="beauty-icon" data-value="1">üå∏</span>
                    <span class="beauty-icon" data-value="2">üå∏</span>
                    <span class="beauty-icon" data-value="3">üå∏</span>
                    <span class="beauty-icon" data-value="4">üå∏</span>
                    <span class="beauty-icon" data-value="5">üå∏</span>
                </div>
            </div>
            <div class="category-group">
                <span>Danger:</span>
                <div class="danger-rating">
                    <span class="danger-icon" data-value="1">‚ò†Ô∏è</span>
                    <span class="danger-icon" data-value="2">‚ò†Ô∏è</span>
                    <span class="danger-icon" data-value="3">‚ò†Ô∏è</span>
                    <span class="danger-icon" data-value="4">‚ò†Ô∏è</span>
                    <span class="danger-icon" data-value="5">‚ò†Ô∏è</span>
                </div>
            </div>

            {{ range .Categories }}
            <label><input type="checkbox" class="category" value="{{.Nom}}"> {{.Nom}} </label>
            {{ end }}
        </div>
        <div class="tabs">
            <button class="tablink active" data-tab="latest">Derniers Posts</button>
            <button class="tablink" data-tab="featured">√Ä la Une</button>
            <button class="tablink" data-tab="popular">Posts Populaires</button>
        </div>
        <div id="latest" class="tabcontent">
            <div class="feed-section">
                <h2>Derniers Posts</h2>
                {{ range .RecentPosts }}
                <div class="post" data-categories="{{ range .Categories }}{{.Nom}},{{end}}" data-beauty="{{ .Beauty }}" data-danger="{{ .Danger }}">{{ .Title }}</div>
                {{ end }}
            </div>
        </div>
        <div id="featured" class="tabcontent" style="display:none">
            <div class="feed-section">
                <h2>√Ä la Une</h2>
                {{ range .UnePosts }}
                <div class="post" data-categories="{{ range .Categories }}{{.Nom}},{{end}}" data-beauty="{{ .Beauty }}" data-danger="{{ .Danger }}">{{ .Title }}</div>
                {{ end }}
            </div>
        </div>
        <div id="popular" class="tabcontent" style="display:none">
            <div class="feed-section">
                <h2>Posts Populaires</h2>
                {{ range .TopPosts }}
                <div class="post" data-categories="{{ range .Categories }}{{.Nom}},{{end}}" data-beauty="{{ .Beauty }}" data-danger="{{ .Danger }}">{{ .Title }}</div>
                {{ end }}

            </div>
        </div>
    </main>
</div>
<div id="notifications-panel" class="notifications-panel">
    <div class="notifications-content">
        <h2>Notifications</h2>
        <div id="notifications-list">
            <!-- Les notifications seront ajout√©es ici -->
        </div>
        <button class="close-button" onclick="closeNotifications()">Fermer</button>
    </div>
</div>
<script src="/assets/js/forum.js" defer></script>
<script src="/assets/js/notifications.js" defer></script>
<script src="/assets/js/filters.js" defer></script>
</body>
</html>
